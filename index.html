<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Witness Collection - Sales Receipt</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .receipt-container {
            border: 1px solid #ccc;
            padding: 30px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        .receipt-header {
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #eee;
            padding-bottom: 20px;
        }
        
        .receipt-header h1 {
            color: #2c3e50;
            margin: 0;
            font-size: 24px;
        }
        
        .receipt-header .logo-placeholder {
            width: 120px;
            height: 120px;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px dashed #ccc;
            border-radius: 50%;
            font-size: 12px;
            text-align: center;
        }
        
        .receipt-header .tagline {
            font-style: italic;
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        .receipt-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .receipt-info .receipt-number {
            font-weight: bold;
        }
        
        .customer-info {
            margin-bottom: 20px;
        }
        
        .customer-info input,
        .customer-info textarea {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .customer-info textarea {
            resize: vertical;
            min-height: 60px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background-color: #f5f5f5;
        }
        
        .add-item-btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            cursor: pointer;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        
        .add-item-btn:hover {
            background-color: #2980b9;
        }
        
        .remove-item-btn {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 4px 8px;
            cursor: pointer;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .remove-item-btn:hover {
            background-color: #c0392b;
        }
        
        .total-section {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            margin-top: 20px;
            font-weight: bold;
        }
        
        .total-row {
            display: flex;
            justify-content: flex-end;
            width: 100%;
            margin-bottom: 5px;
        }
        
        .total-label {
            padding-right: 20px;
            min-width: 150px;
            text-align: right;
        }
        
        .discount-container {
            display: flex;
            justify-content: flex-end;
            margin: 10px 0 20px;
            align-items: center;
            gap: 15px;
        }
        
        .discount-input {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .discount-input input {
            width: 80px;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .receipt-footer {
            margin-top: 30px;
            text-align: center;
            font-size: 14px;
            color: #7f8c8d;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }
        
        .action-buttons {
            margin-top: 30px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        
        .action-button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .print-btn {
            background-color: #2ecc71;
            color: white;
        }
        
        .print-btn:hover {
            background-color: #27ae60;
        }
        
        .reset-btn {
            background-color: #95a5a6;
            color: white;
        }
        
        .reset-btn:hover {
            background-color: #7f8c8d;
        }
        
        @media print {
            .action-buttons, .add-item-btn, .remove-item-btn, .discount-input {
                display: none;
            }
            
            body {
                padding: 0;
            }
            
            .receipt-container {
                box-shadow: none;
                border: none;
            }
            
            input, textarea {
                border: none !important;
                padding: 0 !important;
            }
        }
    </style>
</head>
<body>
    <div class="receipt-container">
        <div class="receipt-header">
            <div class="logo-placeholder">Your Logo Here</div>
            <h1>THE WITNESS COLLECTION</h1>
            <p class="tagline">Faith-Inspired Merchandise</p>
        </div>
        
        <div class="receipt-info">
            <div>
                <p><span class="receipt-number">Receipt #:</span> <span id="receipt-number"></span></p>
                <p><span>Date:</span> <span id="receipt-date"></span></p>
            </div>
            <div>
                <p><span>Payment Method:</span>
                    <select id="payment-method" style="padding: 5px; border-radius: 4px; border: 1px solid #ddd;">
                        <option value="cash">Cash</option>
                        <option value="mobile-money">Mobile Money</option>
                        <option value="telecel-cash">Telecel Cash</option>
                        <option value="bank-transfer">Bank Transfer</option>
                        <option value="card">Card Payment</option>
                        <option value="other">Other</option>
                    </select>
                </p>
                <p id="payment-details-container" style="display: none;">
                    <span>Reference/Details:</span>
                    <input type="text" id="payment-details" placeholder="Enter reference or details" 
                           style="padding: 5px; border-radius: 4px; border: 1px solid #ddd; width: 200px;">
                </p>
            </div>
        </div>
        
        <div class="customer-info">
            <h3>Customer Information</h3>
            <div>
                <label for="customer-name">Name:</label>
                <input type="text" id="customer-name" placeholder="Customer Name">
            </div>
            <div>
                <label for="customer-email">Email:</label>
                <input type="email" id="customer-email" placeholder="customer@example.com">
            </div>
            <div>
                <label for="customer-phone">Phone:</label>
                <input type="text" id="customer-phone" placeholder="(555) 123-4567">
            </div>
            <div>
                <label for="customer-notes">Notes:</label>
                <textarea id="customer-notes" placeholder="Any special notes or requests"></textarea>
            </div>
        </div>
        
        <h3>Items Purchased</h3>
        <div style="margin-bottom: 15px;">
            <label for="product-select">Select Product:</label>
            <select id="product-select" style="padding: 8px; border-radius: 4px; border: 1px solid #ddd; width: 200px;">
                <option value="">-- Select Product --</option>
                <option value="tshirt">T-shirt</option>
                <option value="lapel">Lapel Pin</option>
                <option value="bookmark">Bookmark</option>
                <option value="towel">Face Towel</option>
                <option value="journal">Journal</option>
                <option value="book">Book</option>
                <option value="oil">Oil</option>
                <option value="other">Other</option>
            </select>
            <button id="add-product-btn" style="margin-left: 10px; padding: 8px 15px; background-color: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer;">Add to Receipt</button>
        </div>

        <table id="items-table">
            <thead>
                <tr>
                    <th>Item</th>
                    <th>Description</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Total</th>
                    <th></th>
                </tr>
            </thead>
            <tbody id="items-body">
                <!-- Items will be added here -->
            </tbody>
        </table>
        
        <button class="add-item-btn" id="add-item-btn">+ Add Custom Item</button>
        
        <div class="discount-container">
            <div class="discount-input">
                <label for="discount-amount">Discount (₵):</label>
                <input type="number" id="discount-amount" value="0" min="0" step="0.01" onchange="calculateTotal()">
            </div>
            <div class="discount-input">
                <label for="discount-percent">Discount (%):</label>
                <input type="number" id="discount-percent" value="0" min="0" max="100" onchange="calculateTotal()">
            </div>
            <div class="discount-input">
                <label for="currency">Currency:</label>
                <select id="currency" onchange="updateCurrencySymbol()" style="padding: 5px; border-radius: 4px; border: 1px solid #ddd;">
                    <option value="₵">Ghana Cedi (₵)</option>
                    <option value="$">US Dollar ($)</option>
                    <option value="€">Euro (€)</option>
                </select>
            </div>
        </div>
        
        <div class="total-section">
            <div class="total-row">
                <div class="total-label">Subtotal:</div>
                <div><span id="currency-symbol">₵</span><span id="subtotal-amount">0.00</span></div>
            </div>
            <div class="total-row">
                <div class="total-label">Discount Applied:</div>
                <div><span id="currency-symbol-discount">₵</span><span id="discount-applied">0.00</span></div>
            </div>
            <div class="total-row" style="font-size: 1.2em; margin-top: 5px;">
                <div class="total-label">Total Amount:</div>
                <div><span id="currency-symbol-total">₵</span><span id="total-amount">0.00</span></div>
            </div>
        </div>
        
        <div class="receipt-footer">
            <p>Thank you for supporting The Witness Collection!</p>
            <p>Your purchase helps support our ministry.</p>
        </div>
        
        <div class="action-buttons">
            <button class="action-button print-btn" id="print-btn">Print Receipt</button>
            <button class="action-button reset-btn" id="reset-btn">Reset Form</button>
        </div>
    </div>

    <script>
        // Product catalog with default prices
        const productCatalog = {
            'tshirt': { name: 'T-shirt', price: 25.00, needsSize: true, needsColor: true },
            'lapel': { name: 'Lapel Pin', price: 12.00 },
            'bookmark': { name: 'Bookmark', price: 5.00 },
            'towel': { name: 'Face Towel', price: 15.00, needsColor: true },
            'journal': { name: 'Journal', price: 18.00 },
            'book': { name: 'Book', price: 22.00, needsTitle: true },
            'oil': { name: 'Oil', price: 20.00 },
            'other': { name: 'Other Item', price: 0.00 }
        };

        document.addEventListener('DOMContentLoaded', function() {
            // Generate receipt number and date
            generateReceiptNumber();
            updateDateAndTime();
            
            // Event listeners
            document.getElementById('add-item-btn').addEventListener('click', addCustomItemRow);
            document.getElementById('add-product-btn').addEventListener('click', handleAddProduct);
            document.getElementById('print-btn').addEventListener('click', printReceipt);
            document.getElementById('reset-btn').addEventListener('click', resetForm);
            document.getElementById('payment-method').addEventListener('change', togglePaymentDetails);
            document.getElementById('discount-amount').addEventListener('input', handleDiscountAmountChange);
            document.getElementById('discount-percent').addEventListener('input', handleDiscountPercentChange);
            
            // Show payment details for certain payment methods
            function togglePaymentDetails() {
                const paymentMethod = document.getElementById('payment-method').value;
                const detailsContainer = document.getElementById('payment-details-container');
                
                if (paymentMethod === 'mobile-money' || paymentMethod === 'telecel-cash' || 
                    paymentMethod === 'bank-transfer' || paymentMethod === 'other') {
                    detailsContainer.style.display = 'block';
                } else {
                    detailsContainer.style.display = 'none';
                }
            }
            
            // Initialize payment details visibility
            togglePaymentDetails();
        });

        function updateDateAndTime() {
            const today = new Date();
            const dateStr = today.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric'
            });
            const timeStr = today.toLocaleTimeString('en-US', {
                hour: '2-digit',
                minute: '2-digit'
            });
            document.getElementById('receipt-date').textContent = `${dateStr} at ${timeStr}`;
        }
        
        function generateReceiptNumber() {
            // Generate a unique receipt number using timestamp + random number
            const timestamp = new Date().getTime();
            const random = Math.floor(Math.random() * 1000);
            const receiptNumber = 'TWC-' + timestamp.toString().slice(-6) + '-' + random;
            document.getElementById('receipt-number').textContent = receiptNumber;
        }
        
        function handleAddProduct() {
            const productSelect = document.getElementById('product-select');
            const productKey = productSelect.value;
            
            if (!productKey) {
                alert('Please select a product');
                return;
            }
            
            const product = productCatalog[productKey];
            
            // Handle T-shirts with special options
            if (productKey === 'tshirt') {
                // Create dialog for T-shirt options
                const sizeColor = promptTshirtOptions();
                if (sizeColor) {
                    addProductRow(product, `Size: ${sizeColor.size}, Color: ${sizeColor.color}`);
                }
            } 
            // Handle books with title
            else if (productKey === 'book') {
                const title = prompt('Enter book title:');
                if (title) {
                    addProductRow(product, `Title: ${title}`);
                }
            }
            // Handle items with color option
            else if (product.needsColor) {
                const color = prompt('Enter color:');
                if (color) {
                    addProductRow(product, `Color: ${color}`);
                }
            }
            else {
                addProductRow(product);
            }
            
            // Reset select
            productSelect.value = '';
        }
        
        function promptTshirtOptions() {
            const size = prompt('Enter T-shirt size (S, M, L, XL, XXL, etc):');
            if (!size) return null;
            
            const color = prompt('Enter T-shirt color:');
            if (!color) return null;
            
            return { size, color };
        }
        
        function addProductRow(product, description = '') {
            const tbody = document.getElementById('items-body');
            const row = document.createElement('tr');
            const currencySymbol = document.getElementById('currency-symbol').textContent;
            
            row.innerHTML = `
                <td><input type="text" class="item-name" value="${product.name}" readonly></td>
                <td><input type="text" class="item-desc" value="${description}" ${!description ? 'placeholder="Description"' : ''}></td>
                <td>${currencySymbol}<input type="number" class="item-price" value="${product.price.toFixed(2)}" step="0.01" min="0" onchange="updateRowTotal(this)"></td>
                <td><input type="number" class="item-qty" value="1" min="1" onchange="updateRowTotal(this)"></td>
                <td>${currencySymbol}<span class="row-total">${product.price.toFixed(2)}</span></td>
                <td><button class="remove-item-btn" onclick="removeItemRow(this)">Remove</button></td>
            `;
            
            tbody.appendChild(row);
            calculateTotal();
        }
        
        function addCustomItemRow() {
            const tbody = document.getElementById('items-body');
            const row = document.createElement('tr');
            const currencySymbol = document.getElementById('currency-symbol').textContent;
            
            row.innerHTML = `
                <td><input type="text" class="item-name" placeholder="Item Name"></td>
                <td><input type="text" class="item-desc" placeholder="Description"></td>
                <td>${currencySymbol}<input type="number" class="item-price" placeholder="0.00" step="0.01" min="0" onchange="updateRowTotal(this)"></td>
                <td><input type="number" class="item-qty" placeholder="1" value="1" min="1" onchange="updateRowTotal(this)"></td>
                <td>${currencySymbol}<span class="row-total">0.00</span></td>
                <td><button class="remove-item-btn" onclick="removeItemRow(this)">Remove</button></td>
            `;
            
            tbody.appendChild(row);
        }
        
        function removeItemRow(btn) {
            const row = btn.closest('tr');
            row.remove();
            calculateTotal();
        }
        
        function updateRowTotal(input) {
            const row = input.closest('tr');
            const price = parseFloat(row.querySelector('.item-price').value) || 0;
            const qty = parseInt(row.querySelector('.item-qty').value) || 1;
            const total = price * qty;
            
            row.querySelector('.row-total').textContent = total.toFixed(2);
            calculateTotal();
        }
        
        function handleDiscountAmountChange() {
            // When discount amount changes, reset percentage
            if (parseFloat(document.getElementById('discount-amount').value) > 0) {
                document.getElementById('discount-percent').value = 0;
            }
            calculateTotal();
        }
        
        function handleDiscountPercentChange() {
            // When discount percentage changes, reset amount
            if (parseFloat(document.getElementById('discount-percent').value) > 0) {
                document.getElementById('discount-amount').value = 0;
            }
            calculateTotal();
        }
        
        function updateCurrencySymbol() {
            const currencySymbol = document.getElementById('currency').value;
            
            // Update all currency symbols
            document.getElementById('currency-symbol').textContent = currencySymbol;
            document.getElementById('currency-symbol-discount').textContent = currencySymbol;
            document.getElementById('currency-symbol-total').textContent = currencySymbol;
            
            // Update currency in table
            const priceCells = document.querySelectorAll('td:nth-child(3)');
            priceCells.forEach(cell => {
                cell.innerHTML = cell.innerHTML.replace(/[₵$€]/, currencySymbol);
            });
            
            const totalCells = document.querySelectorAll('td:nth-child(5)');
            totalCells.forEach(cell => {
                cell.innerHTML = cell.innerHTML.replace(/[₵$€]/, currencySymbol);
            });
            
            calculateTotal();
        }
        
        function calculateTotal() {
            const rowTotals = document.querySelectorAll('.row-total');
            let subtotal = 0;
            
            rowTotals.forEach(function(element) {
                subtotal += parseFloat(element.textContent) || 0;
            });
            
            // Calculate discount
            const discountAmount = parseFloat(document.getElementById('discount-amount').value) || 0;
            const discountPercent = parseFloat(document.getElementById('discount-percent').value) || 0;
            
            let discount = 0;
            if (discountAmount > 0) {
                discount = discountAmount;
            } else if (discountPercent > 0) {
                discount = (discountPercent / 100) * subtotal;
            }
            
            // Calculate final total
            const finalTotal = Math.max(0, subtotal - discount);
            
            // Update displays
            document.getElementById('subtotal-amount').textContent = subtotal.toFixed(2);
            document.getElementById('discount-applied').textContent = discount.toFixed(2);
            document.getElementById('total-amount').textContent = finalTotal.toFixed(2);
        }
        
        function printReceipt() {
            window.print();
        }
        
        function resetForm() {
            if (confirm('Are you sure you want to reset the form?')) {
                // Clear customer info
                document.getElementById('customer-name').value = '';
                document.getElementById('customer-email').value = '';
                document.getElementById('customer-phone').value = '';
                document.getElementById('customer-notes').value = '';
                
                // Reset payment method
                document.getElementById('payment-method').value = 'cash';
                document.getElementById('payment-details').value = '';
                document.getElementById('payment-details-container').style.display = 'none';
                
                // Remove all item rows
                const tbody = document.getElementById('items-body');
                while (tbody.firstChild) {
                    tbody.removeChild(tbody.firstChild);
                }
                
                // Reset discount fields
                document.getElementById('discount-amount').value = '0';
                document.getElementById('discount-percent').value = '0';
                
                // Reset totals
                document.getElementById('subtotal-amount').textContent = '0.00';
                document.getElementById('discount-applied').textContent = '0.00';
                document.getElementById('total-amount').textContent = '0.00';
                
                // Generate new receipt number and update date/time
                generateReceiptNumber();
                updateDateAndTime();
            }
        }
    </script>
</body>
</html>